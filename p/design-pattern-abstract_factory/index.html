<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="è®¾è®¡æ¨¡å¼-æŠ½è±¡å·¥å‚abstract_factory [TOC]\nOverview æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ ç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±» å…·ä½“å·¥å‚ç”Ÿäº§å…·ä½“äº§å“ å…·ä½“å·¥å‚ç»§æ‰¿æŠ½è±¡å·¥å‚ å…·ä½“äº§å“ç»§æ‰¿æŠ½è±¡äº§å“ 1.æŠ½è±¡å·¥å‚abstract_factory æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚è¿™ç§æ¨¡å¼å…è®¸ç³»ç»Ÿç‹¬ç«‹äºå…·ä½“ç±»çš„å˜åŒ–ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚\n"><title>design pattern abstract_factory</title>
<link rel=canonical href=https://wesigj.github.io/p/design-pattern-abstract_factory/><link rel=stylesheet href=/scss/style.min.eb7f50cc23d1bd7ff2d2052c25614348c70e74f31980578f9f89974c5a7447d4.css><meta property='og:title' content="design pattern abstract_factory"><meta property='og:description' content="è®¾è®¡æ¨¡å¼-æŠ½è±¡å·¥å‚abstract_factory [TOC]\nOverview æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ ç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±» å…·ä½“å·¥å‚ç”Ÿäº§å…·ä½“äº§å“ å…·ä½“å·¥å‚ç»§æ‰¿æŠ½è±¡å·¥å‚ å…·ä½“äº§å“ç»§æ‰¿æŠ½è±¡äº§å“ 1.æŠ½è±¡å·¥å‚abstract_factory æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚è¿™ç§æ¨¡å¼å…è®¸ç³»ç»Ÿç‹¬ç«‹äºå…·ä½“ç±»çš„å˜åŒ–ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚\n"><meta property='og:url' content='https://wesigj.github.io/p/design-pattern-abstract_factory/'><meta property='og:site_name' content="Wesigj's blog"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='design_pattern'><meta property='article:published_time' content='2024-09-08T00:08:00+08:00'><meta property='article:modified_time' content='2024-09-08T00:08:00+08:00'><meta name=twitter:title content="design pattern abstract_factory"><meta name=twitter:description content="è®¾è®¡æ¨¡å¼-æŠ½è±¡å·¥å‚abstract_factory [TOC]\nOverview æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ ç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±» å…·ä½“å·¥å‚ç”Ÿäº§å…·ä½“äº§å“ å…·ä½“å·¥å‚ç»§æ‰¿æŠ½è±¡å·¥å‚ å…·ä½“äº§å“ç»§æ‰¿æŠ½è±¡äº§å“ 1.æŠ½è±¡å·¥å‚abstract_factory æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚è¿™ç§æ¨¡å¼å…è®¸ç³»ç»Ÿç‹¬ç«‹äºå…·ä½“ç±»çš„å˜åŒ–ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚\n"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu7443220043442625548.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Wesigj's blog</a></h1><h2 class=site-description>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ã€‚</h2></div></header><ol class=menu-social><li><a href=https://wesigj.github.io/ target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/_index.zh-cn/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>ä¸»é¡µ</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#overview>Overview</a></li><li><a href=#1æŠ½è±¡å·¥å‚abstract_factory>1.æŠ½è±¡å·¥å‚abstract_factory</a></li><li><a href=#2åœ¨cä¸­å¦‚ä½•ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼æ¥åˆ›å»ºä¸€ä¸ªæ›´å¤æ‚çš„äº§å“æ—>2.åœ¨C++ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼æ¥åˆ›å»ºä¸€ä¸ªæ›´å¤æ‚çš„äº§å“æ—ï¼Ÿ</a></li><li><a href=#3åœ¨cä¸­æŠ½è±¡å·¥å‚æ¨¡å¼çš„å®ç°æœ‰å“ªäº›å¸¸è§çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ>3.åœ¨C++ä¸­ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„å®ç°æœ‰å“ªäº›å¸¸è§çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Ÿ</a></li><li><a href=#4å¦‚æœæˆ‘æƒ³åœ¨cä¸­å®ç°ä¸€ä¸ªæ›´çµæ´»çš„å·¥å‚æ¨¡å¼ä½ æœ‰ä»€ä¹ˆå»ºè®®>4.å¦‚æœæˆ‘æƒ³åœ¨C++ä¸­å®ç°ä¸€ä¸ªæ›´çµæ´»çš„å·¥å‚æ¨¡å¼ï¼Œä½ æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ</a></li><li><a href=#5cä¸­å¦‚ä½•é¿å…æŠ½è±¡å·¥å‚æ¨¡å¼å¯¼è‡´çš„ç³»ç»Ÿå¤æ‚æ€§å¢åŠ >5.C++ä¸­ï¼Œå¦‚ä½•é¿å…æŠ½è±¡å·¥å‚æ¨¡å¼å¯¼è‡´çš„ç³»ç»Ÿå¤æ‚æ€§å¢åŠ ï¼Ÿ</a></li><li><a href=#å…³äºä½œè€…>å…³äºä½œè€…</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/design_pattern/ style=background-color:#2a9d8f;color:#fff>design_pattern</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/design-pattern-abstract_factory/>design pattern abstract_factory</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 08, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>10 minute read</time></div></footer></div></header><section class=article-content><h1 id=è®¾è®¡æ¨¡å¼-æŠ½è±¡å·¥å‚abstract_factory>è®¾è®¡æ¨¡å¼-æŠ½è±¡å·¥å‚abstract_factory</h1><p>[TOC]</p><h2 id=overview>Overview</h2><ul><li>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼</li><li>ç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»</li><li>å…·ä½“å·¥å‚ç”Ÿäº§å…·ä½“äº§å“<ul><li>å…·ä½“å·¥å‚ç»§æ‰¿æŠ½è±¡å·¥å‚</li><li>å…·ä½“äº§å“ç»§æ‰¿æŠ½è±¡äº§å“</li></ul></li></ul><hr><h2 id=1æŠ½è±¡å·¥å‚abstract_factory>1.æŠ½è±¡å·¥å‚abstract_factory</h2><p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œç”¨äºåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚è¿™ç§æ¨¡å¼å…è®¸ç³»ç»Ÿç‹¬ç«‹äºå…·ä½“ç±»çš„å˜åŒ–ï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><p>åœ¨C++ä¸­å®ç°æŠ½è±¡å·¥å‚æ¨¡å¼é€šå¸¸æ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p><strong>å®šä¹‰äº§å“æ¥å£</strong>ï¼šä¸ºä¸åŒçš„äº§å“æ—å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ¥å£ã€‚</p></li><li><p><strong>åˆ›å»ºå…·ä½“äº§å“ç±»</strong>ï¼šä¸ºæ¯ä¸ªäº§å“æ¥å£å®ç°å…·ä½“ç±»ã€‚</p></li><li><p><strong>å®šä¹‰æŠ½è±¡å·¥å‚æ¥å£</strong>ï¼šå®šä¹‰ä¸€ä¸ªæŠ½è±¡å·¥å‚æ¥å£ï¼Œå£°æ˜åˆ›å»ºå„ç§äº§å“çš„æ¥å£ã€‚</p></li><li><p><strong>åˆ›å»ºå…·ä½“å·¥å‚ç±»</strong>ï¼šä¸ºæ¯ä¸ªå…·ä½“çš„äº§å“æ—å®ç°ä¸€ä¸ªå…·ä½“å·¥å‚ç±»ã€‚</p></li><li><p><strong>ä½¿ç”¨å·¥å‚æ–¹æ³•</strong>ï¼šå®¢æˆ·ç«¯ä»£ç ä½¿ç”¨æŠ½è±¡å·¥å‚æ¥å£æ¥åˆ›å»ºäº§å“ï¼Œè€Œä¸éœ€è¦çŸ¥é“å…·ä½“å·¥å‚å’Œäº§å“çš„ç»†èŠ‚ã€‚</p></li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„C++ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•å®ç°æŠ½è±¡å·¥å‚æ¨¡å¼ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;memory&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>// äº§å“æ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=n>makeSound</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Animal</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“äº§å“
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>Dog</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>makeSound</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Woof!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Cat</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>makeSound</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Meow!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// æŠ½è±¡å·¥å‚æ¥å£
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>AnimalFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createDog</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createCat</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>AnimalFactory</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å…·ä½“å·¥å‚
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>DogFactory</span> <span class=o>:</span> <span class=k>public</span> <span class=n>AnimalFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createDog</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Dog</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createCat</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>nullptr</span><span class=p>;</span> <span class=c1>// DogFactory cannot create a Cat
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>CatFactory</span> <span class=o>:</span> <span class=k>public</span> <span class=n>AnimalFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createDog</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>nullptr</span><span class=p>;</span> <span class=c1>// CatFactory cannot create a Dog
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createCat</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Cat</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// å®¢æˆ·ç«¯ä»£ç 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>AnimalFactory</span><span class=o>*</span> <span class=n>factory</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>factory</span> <span class=o>=</span> <span class=k>new</span> <span class=n>DogFactory</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>dog</span> <span class=o>=</span> <span class=n>factory</span><span class=o>-&gt;</span><span class=n>createDog</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>dog</span><span class=o>-&gt;</span><span class=n>makeSound</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>delete</span> <span class=n>factory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>factory</span> <span class=o>=</span> <span class=k>new</span> <span class=n>CatFactory</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>cat</span> <span class=o>=</span> <span class=n>factory</span><span class=o>-&gt;</span><span class=n>createCat</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>cat</span><span class=o>-&gt;</span><span class=n>makeSound</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>delete</span> <span class=n>factory</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Animal</code> æ˜¯ä¸€ä¸ªäº§å“æ¥å£ï¼Œ<code>Dog</code> å’Œ <code>Cat</code> æ˜¯å…·ä½“äº§å“ã€‚<code>AnimalFactory</code> æ˜¯æŠ½è±¡å·¥å‚æ¥å£ï¼Œ<code>DogFactory</code> å’Œ <code>CatFactory</code> æ˜¯å…·ä½“å·¥å‚ï¼Œå®ƒä»¬åˆ†åˆ«å®ç°äº†åˆ›å»º <code>Dog</code> å’Œ <code>Cat</code> çš„æ–¹æ³•ã€‚å®¢æˆ·ç«¯ä»£ç é€šè¿‡å·¥å‚æ¥å£æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸éœ€è¦çŸ¥é“å…·ä½“æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚è¿™æ ·ï¼Œå¦‚æœéœ€è¦æ·»åŠ æ–°çš„åŠ¨ç‰©ç±»å‹ï¼Œåªéœ€è¦æ·»åŠ ç›¸åº”çš„äº§å“ç±»å’Œå·¥å‚ç±»å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç ã€‚</p><h2 id=2åœ¨cä¸­å¦‚ä½•ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼æ¥åˆ›å»ºä¸€ä¸ªæ›´å¤æ‚çš„äº§å“æ—>2.åœ¨C++ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼æ¥åˆ›å»ºä¸€ä¸ªæ›´å¤æ‚çš„äº§å“æ—ï¼Ÿ</h2><p>åœ¨C++ä¸­ï¼Œä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºä¸€ä¸ªæ›´å¤æ‚çš„äº§å“æ—æ¶‰åŠåˆ°å®šä¹‰å¤šä¸ªäº§å“å±‚æ¬¡ç»“æ„å’Œç›¸åº”çš„å·¥å‚æ¥å£ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„äº§å“æ—çš„ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªäº§å“ç±»åˆ«å’Œç›¸åº”çš„å·¥å‚æ–¹æ³•ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤æ‚çš„äº§å“æ—ï¼ŒåŒ…æ‹¬ä¸åŒç±»å‹çš„åŠ¨ç‰©å’Œå®ƒä»¬çš„æ –æ¯åœ°ã€‚æ¯ç§åŠ¨ç‰©éƒ½æœ‰ç‰¹å®šçš„æ –æ¯åœ°ï¼Œä¾‹å¦‚ï¼Œé¸Ÿç±»å¯èƒ½ç”Ÿæ´»åœ¨æ ‘ä¸Šæˆ–æ°´è¾¹ï¼Œè€Œçˆ¬è¡ŒåŠ¨ç‰©å¯èƒ½ç”Ÿæ´»åœ¨æ´ç©´æˆ–æ²™æ¼ ä¸­ã€‚</p><p>é¦–å…ˆï¼Œå®šä¹‰äº§å“æ¥å£ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// Animal.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Animal</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>makeSound</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Habitat.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>class</span> <span class=nc>Habitat</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>Habitat</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=kt>void</span> <span class=nf>describe</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¥ç€ï¼Œåˆ›å»ºå…·ä½“çš„äº§å“ç±»ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// Bird.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;Animal.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Bird</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>makeSound</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Bird chirps!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// TreeHabitat.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;Habitat.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>TreeHabitat</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Habitat</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>describe</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;This is a tree habitat.&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Reptile.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;Animal.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Reptile</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Animal</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>makeSound</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Reptile hisses!&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// DesertHabitat.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;Habitat.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>DesertHabitat</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Habitat</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>describe</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;This is a desert habitat.&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œå®šä¹‰æŠ½è±¡å·¥å‚æ¥å£ï¼ŒåŒ…æ‹¬åˆ›å»ºåŠ¨ç‰©å’Œæ –æ¯åœ°çš„æ–¹æ³•ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// AnimalHabitatFactory.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;memory&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>AnimalHabitatFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createAnimal</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Habitat</span><span class=o>&gt;</span> <span class=n>createHabitat</span><span class=p>()</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=o>~</span><span class=n>AnimalHabitatFactory</span><span class=p>()</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>åˆ›å»ºå…·ä½“çš„å·¥å‚ç±»ï¼Œä¾‹å¦‚ä¸€ä¸ªå·¥å‚ä¸“é—¨åˆ›å»ºé¸Ÿç±»å’Œå®ƒä»¬çš„æ –æ¯åœ°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// BirdHabitatFactory.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;AnimalHabitatFactory.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;Bird.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;TreeHabitat.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>BirdHabitatFactory</span> <span class=o>:</span> <span class=k>public</span> <span class=n>AnimalHabitatFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createAnimal</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Bird</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Habitat</span><span class=o>&gt;</span> <span class=n>createHabitat</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>TreeHabitat</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>åŒæ ·ï¼Œå¯ä»¥åˆ›å»ºå¦ä¸€ä¸ªå·¥å‚ç±»æ¥åˆ›å»ºçˆ¬è¡ŒåŠ¨ç‰©å’Œå®ƒä»¬çš„æ –æ¯åœ°ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// ReptileHabitatFactory.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;AnimalHabitatFactory.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;Reptile.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;DesertHabitat.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ReptileHabitatFactory</span> <span class=o>:</span> <span class=k>public</span> <span class=n>AnimalHabitatFactory</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Animal</span><span class=o>&gt;</span> <span class=n>createAnimal</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>Reptile</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>Habitat</span><span class=o>&gt;</span> <span class=n>createHabitat</span><span class=p>()</span> <span class=k>override</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>DesertHabitat</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€åï¼Œå®¢æˆ·ç«¯ä»£ç ä½¿ç”¨æŠ½è±¡å·¥å‚æ¥åˆ›å»ºå¯¹è±¡ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// main.cpp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;AnimalHabitatFactory.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a bird and its habitat
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>AnimalHabitatFactory</span><span class=o>&gt;</span> <span class=n>birdFactory</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>BirdHabitatFactory</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>bird</span> <span class=o>=</span> <span class=n>birdFactory</span><span class=o>-&gt;</span><span class=n>createAnimal</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>birdHabitat</span> <span class=o>=</span> <span class=n>birdFactory</span><span class=o>-&gt;</span><span class=n>createHabitat</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>bird</span><span class=o>-&gt;</span><span class=n>makeSound</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>birdHabitat</span><span class=o>-&gt;</span><span class=n>describe</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a reptile and its habitat
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>AnimalHabitatFactory</span><span class=o>&gt;</span> <span class=n>reptileFactory</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>make_unique</span><span class=o>&lt;</span><span class=n>ReptileHabitatFactory</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>reptile</span> <span class=o>=</span> <span class=n>reptileFactory</span><span class=o>-&gt;</span><span class=n>createAnimal</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>auto</span> <span class=n>reptileHabitat</span> <span class=o>=</span> <span class=n>reptileFactory</span><span class=o>-&gt;</span><span class=n>createHabitat</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>reptile</span><span class=o>-&gt;</span><span class=n>makeSound</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=n>reptileHabitat</span><span class=o>-&gt;</span><span class=n>describe</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªäº§å“å±‚æ¬¡ç»“æ„ï¼š<code>Animal</code> å’Œ <code>Habitat</code>ï¼Œæ¯ä¸ªå±‚æ¬¡ç»“æ„éƒ½æœ‰è‡ªå·±çš„å…·ä½“å®ç°ã€‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å·¥å‚ <code>AnimalHabitatFactory</code>ï¼Œå®ƒæœ‰ä¸¤ä¸ªæ–¹æ³•æ¥åˆ›å»ºåŠ¨ç‰©å’Œå®ƒä»¬çš„æ –æ¯åœ°ã€‚ç„¶åï¼Œæˆ‘ä»¬ä¸ºæ¯ç§äº§å“æ—åˆ›å»ºäº†å…·ä½“çš„å·¥å‚ç±»ï¼š<code>BirdHabitatFactory</code> å’Œ <code>ReptileHabitatFactory</code>ã€‚å®¢æˆ·ç«¯ä»£ç é€šè¿‡å·¥å‚æ¥å£æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸éœ€è¦çŸ¥é“å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚è¿™æ ·ï¼Œå¦‚æœéœ€è¦æ·»åŠ æ–°çš„åŠ¨ç‰©æˆ–æ –æ¯åœ°ç±»å‹ï¼Œåªéœ€è¦æ·»åŠ ç›¸åº”çš„äº§å“ç±»å’Œå·¥å‚ç±»å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç ã€‚</p><h2 id=3åœ¨cä¸­æŠ½è±¡å·¥å‚æ¨¡å¼çš„å®ç°æœ‰å“ªäº›å¸¸è§çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ>3.åœ¨C++ä¸­ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼çš„å®ç°æœ‰å“ªäº›å¸¸è§çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Ÿ</h2><p>åœ¨C++ä¸­å®ç°æŠ½è±¡å·¥å‚æ¨¡å¼æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›å¸¸è§é—®é¢˜ä»¥åŠç›¸åº”çš„è§£å†³æ–¹æ¡ˆï¼š</p><ol><li><p><strong>é—®é¢˜ï¼šç³»ç»Ÿå¤æ‚æ€§å¢åŠ </strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šç¡®å®ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼é€šè¿‡å¼•å…¥è®¸å¤šæŠ½è±¡ç±»å’Œæ¥å£ï¼Œå¯èƒ½ä¼šä½¿ç³»ç»Ÿå˜å¾—æ›´åŠ å¤æ‚ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥åœ¨çœŸæ­£éœ€è¦è¿™ç§æ¨¡å¼æ—¶æ‰ä½¿ç”¨å®ƒï¼Œä¾‹å¦‚å½“å­˜åœ¨å¤šä¸ªäº§å“æ—éœ€è¦åˆ›å»ºæ—¶ã€‚å¦‚æœç³»ç»Ÿè¾ƒä¸ºç®€å•ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ›´ç®€å•çš„å·¥å‚æ¨¡å¼æˆ–æ„é€ è€…æ¨¡å¼ ã€‚</li></ul></li><li><p><strong>é—®é¢˜ï¼šéš¾ä»¥æ”¯æŒæ–°äº§å“ç±»å‹</strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šå½“éœ€è¦æ·»åŠ æ–°çš„äº§å“ç±»å‹æ—¶ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹æŠ½è±¡å·¥å‚æ¥å£ä»¥åŠæ‰€æœ‰å…·ä½“å·¥å‚ç±»ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨è®¾è®¡åˆæœŸå°±è€ƒè™‘åˆ°æ‰©å±•æ€§ï¼Œæˆ–è€…ä½¿ç”¨æ›´çµæ´»çš„è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚åŸå‹æ¨¡å¼æˆ–å»ºé€ è€…æ¨¡å¼ ã€‚</li></ul></li><li><p><strong>é—®é¢˜ï¼šè¿åä¾èµ–å€’ç½®åŸåˆ™</strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šå¦‚æœå®¢æˆ·ç«¯ä»£ç ç›´æ¥ä¾èµ–äºå…·ä½“çš„å·¥å‚å®ç°ï¼Œè€Œä¸æ˜¯æŠ½è±¡æ¥å£ï¼Œè¿™å¯èƒ½è¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿å®¢æˆ·ç«¯åªé€šè¿‡æŠ½è±¡å·¥å‚æ¥å£ä¸å·¥å‚äº¤äº’ï¼Œå¹¶ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¥æä¾›å…·ä½“çš„å·¥å‚å®ç° ã€‚</li></ul></li><li><p><strong>é—®é¢˜ï¼šéš¾ä»¥æ‰©å±•æ–°çš„äº§å“ç­‰çº§ç»“æ„</strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šæŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªé™åˆ¶æ˜¯ï¼Œå‘ç³»ç»Ÿæ·»åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„å¯èƒ½æ¯”è¾ƒå›°éš¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨è®¾è®¡æ—¶é‡‡ç”¨æ›´é€šç”¨çš„æ¥å£ï¼Œæˆ–è€…ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼æ¥ä¸ºæ¯ä¸ªäº§å“å•ç‹¬åˆ›å»ºå·¥å‚ ã€‚</li></ul></li><li><p><strong>é—®é¢˜ï¼šè¿‡åº¦ä½¿ç”¨å¯¼è‡´è®¾è®¡æ··ä¹±</strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šåœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œè¿‡åº¦ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼å¯èƒ½ä¼šä½¿è®¾è®¡å˜å¾—æ··ä¹±ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåº”è¯¥åªåœ¨éœ€è¦åˆ›å»ºç›¸å…³å¯¹è±¡æ—æ—¶ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œå¹¶ä¸”ç¡®ä¿æ¯ä¸ªå·¥å‚åªè´Ÿè´£åˆ›å»ºä¸€ç»„ç´§å¯†ç›¸å…³çš„äº§å“ ã€‚</li></ul></li><li><p><strong>é—®é¢˜ï¼šå‚æ•°åŒ–å·¥å‚ä¸æŠ½è±¡å·¥å‚çš„æ··æ·†</strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šæŠ½è±¡å·¥å‚å’Œå‚æ•°åŒ–å·¥å‚éƒ½ç”¨äºåˆ›å»ºä¸€ç»„ä¸åŒçš„äº§å“ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯ä¸åŒã€‚å½“äº§å“å…·æœ‰ä¸åŒçš„æ¥å£ä¸”éœ€è¦å‘å®¢æˆ·ç«¯æ˜ç¡®è¿™äº›å·®å¼‚æ—¶ï¼Œåº”è¯¥ä½¿ç”¨æŠ½è±¡å·¥å‚ã€‚å¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚ä¸æ˜æ˜¾æˆ–è€…å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“è¿™äº›å·®å¼‚ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°åŒ–å·¥å‚ ã€‚</li></ul></li><li><p><strong>é—®é¢˜ï¼šC++ä¸­çš„å†…å­˜ç®¡ç†</strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šåœ¨ç°ä»£C++ä¸­ï¼Œæ¨èä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆå¦‚<code>std::unique_ptr</code>ï¼‰æ¥ç®¡ç†å†…å­˜ï¼Œé¿å…ä½¿ç”¨è£¸æŒ‡é’ˆå’Œç›´æ¥çš„<code>new</code>ã€<code>delete</code>æ“ä½œã€‚è¿™æœ‰åŠ©äºè‡ªåŠ¨ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå‡å°‘å†…å­˜æ³„æ¼çš„é£é™© ã€‚</li></ul></li><li><p><strong>é—®é¢˜ï¼šæ¥å£æˆ–æŠ½è±¡ç±»çš„ä½¿ç”¨é€‰æ‹©</strong></p><ul><li>è§£å†³æ–¹æ¡ˆï¼šåœ¨å®ç°å·¥å‚æ¨¡å¼æ—¶ï¼Œé€‰æ‹©ä½¿ç”¨æ¥å£è¿˜æ˜¯æŠ½è±¡ç±»å–å†³äºå…·ä½“éœ€æ±‚ã€‚å¦‚æœéœ€è¦å®šä¹‰ä¸€ä¸ªç®€å•çš„å·¥å‚ï¼ŒåªåŒ…å«ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œæ¥å£å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœå·¥å‚éœ€è¦åŒ…å«ä¸€äº›å…¬å…±çš„å®ç°ç»†èŠ‚æˆ–å¤šä¸ªæ–¹æ³•ï¼ŒæŠ½è±¡ç±»å¯èƒ½æ›´åˆé€‚ ã€‚</li></ul></li></ol><p>é€šè¿‡è€ƒè™‘è¿™äº›å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°åœ¨C++ä¸­åº”ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h2 id=4å¦‚æœæˆ‘æƒ³åœ¨cä¸­å®ç°ä¸€ä¸ªæ›´çµæ´»çš„å·¥å‚æ¨¡å¼ä½ æœ‰ä»€ä¹ˆå»ºè®®>4.å¦‚æœæˆ‘æƒ³åœ¨C++ä¸­å®ç°ä¸€ä¸ªæ›´çµæ´»çš„å·¥å‚æ¨¡å¼ï¼Œä½ æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ</h2><p>åœ¨C++ä¸­å®ç°ä¸€ä¸ªæ›´çµæ´»çš„å·¥å‚æ¨¡å¼ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ç§æ–¹æ³•å’Œè®¾è®¡æ¨¡å¼ï¼š</p><ol><li><p><strong>ä½¿ç”¨å‚æ•°åŒ–å·¥å‚æ–¹æ³•</strong>ï¼š</p><ul><li>å…è®¸å·¥å‚æ–¹æ³•æ¥å—å‚æ•°ï¼Œä»¥å†³å®šåˆ›å»ºå“ªç§å…·ä½“äº§å“ã€‚è¿™å¢åŠ äº†çµæ´»æ€§ï¼Œå› ä¸ºåŒä¸€ä¸ªå·¥å‚å¯ä»¥æ ¹æ®ä¸åŒçš„è¾“å…¥å‚æ•°åˆ›å»ºä¸åŒçš„äº§å“ã€‚</li></ul></li><li><p><strong>ä¾èµ–æ³¨å…¥</strong>ï¼š</p><ul><li>é€šè¿‡ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼Œå°†åˆ›å»ºå¯¹è±¡çš„èŒè´£ä¸ä½¿ç”¨å¯¹è±¡çš„èŒè´£åˆ†ç¦»ï¼Œä»è€Œæé«˜çµæ´»æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</li></ul></li><li><p><strong>æ³¨å†Œæœºåˆ¶</strong>ï¼š</p><ul><li>ä½¿ç”¨æ³¨å†Œæœºåˆ¶å…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€æ³¨å†Œå’Œåˆ›å»ºå…·ä½“äº§å“ã€‚è¿™å¯ä»¥é€šè¿‡å°†å·¥å‚æ–¹æ³•æ³¨å†Œåˆ°ä¸€ä¸ªä¸­å¿ƒæ³¨å†Œè¡¨ä¸­æ¥å®ç°ã€‚</li></ul></li><li><p><strong>å•ä¾‹æ¨¡å¼</strong>ï¼š</p><ul><li>å¯¹äºæŸäº›ç±»å‹çš„å·¥å‚ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼ç¡®ä¿å…¨å±€åªæœ‰ä¸€ä¸ªå·¥å‚å®ä¾‹ï¼Œç®€åŒ–èµ„æºç®¡ç†å’Œè®¿é—®ã€‚</li></ul></li><li><p><strong>åŸå‹æ¨¡å¼</strong>ï¼š</p><ul><li>å¦‚æœåˆ›å»ºå¯¹è±¡çš„å¼€é”€å¾ˆå¤§ï¼Œå¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ï¼Œé€šè¿‡å¤åˆ¶ç°æœ‰çš„å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ä»å¤´å¼€å§‹åˆ›å»ºã€‚</li></ul></li><li><p><strong>å»ºé€ è€…æ¨¡å¼</strong>ï¼š</p><ul><li>å½“åˆ›å»ºå¤æ‚å¯¹è±¡æ—¶ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥å°†å¯¹è±¡çš„æ„é€ è¿‡ç¨‹å°è£…èµ·æ¥ï¼Œå…è®¸é€æ­¥æ„å»ºå¯¹è±¡ï¼Œå¹¶åœ¨æœ€åæä¾›ä¸€ä¸ªå®Œæ•´çš„äº§å“ã€‚</li></ul></li><li><p><strong>å·¥å‚æ–¹æ³•æ¨¡å¼</strong>ï¼š</p><ul><li>å·¥å‚æ–¹æ³•æ¨¡å¼å…è®¸å°†å¯¹è±¡çš„åˆ›å»ºå§”æ‰˜ç»™å­ç±»ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®å­ç±»çš„å…·ä½“å®ç°æ¥åˆ›å»ºä¸åŒçš„äº§å“ã€‚</li></ul></li><li><p><strong>æŠ½è±¡å·¥å‚æ¨¡å¼</strong>ï¼š</p><ul><li>å¦‚æœéœ€è¦åˆ›å»ºç›¸å…³æˆ–ä¾èµ–çš„ä¸€ç»„å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚æ¯ä¸ªå…·ä½“å·¥å‚ç±»è´Ÿè´£åˆ›å»ºç‰¹å®šäº§å“æ—çš„æ‰€æœ‰å¯¹è±¡ã€‚</li></ul></li><li><p><strong>å¤šæ€çš„ä½¿ç”¨</strong>ï¼š</p><ul><li>åˆ©ç”¨å¤šæ€æ€§ï¼Œå¯ä»¥åœ¨ä¸çŸ¥é“å…·ä½“å¯¹è±¡ç±»å‹çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»æ¥ä½¿ç”¨å¯¹è±¡ã€‚</li></ul></li><li><p><strong>æ¨¡æ¿å’Œæ³›å‹</strong>ï¼š</p><ul><li>ä½¿ç”¨C++æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹å¯ä»¥åˆ›å»ºç±»å‹å®‰å…¨çš„å·¥å‚ï¼Œè¿™äº›å·¥å‚å¯ä»¥ç”¨äºä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ç§ç±»å‹ç¼–å†™å•ç‹¬çš„ä»£ç ã€‚</li></ul></li><li><p><strong>æœ€å°åŒ–å·¥å‚æ¥å£</strong>ï¼š</p><ul><li>åªæš´éœ²å¿…è¦çš„å·¥å‚æ¥å£ç»™å®¢æˆ·ç«¯ï¼Œéšè—å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œè¿™æ ·åœ¨ä¸æ”¹å˜æ¥å£çš„æƒ…å†µä¸‹å¯ä»¥çµæ´»åœ°æ›´æ”¹å†…éƒ¨å®ç°ã€‚</li></ul></li><li><p><strong>ä½¿ç”¨é…ç½®æ–‡ä»¶</strong>ï¼š</p><ul><li>ä½¿ç”¨é…ç½®æ–‡ä»¶æ¥å®šä¹‰å¯¹è±¡çš„åˆ›å»ºé€»è¾‘ï¼Œè¿™æ ·åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ›´æ”¹é…ç½®å°±å¯ä»¥æ”¹å˜å·¥å‚çš„è¡Œä¸ºã€‚</li></ul></li><li><p><strong>ç»„åˆå·¥å‚æ¨¡å¼</strong>ï¼š</p><ul><li>å°†å¤šä¸ªå·¥å‚ç»„åˆæˆä¸€ä¸ªæ›´å¤æ‚çš„å·¥å‚ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®ä¸åŒçš„æƒ…å†µä½¿ç”¨ä¸åŒçš„å·¥å‚æ¥åˆ›å»ºå¯¹è±¡ã€‚</li></ul></li><li><p><strong>åˆ©ç”¨æ™ºèƒ½æŒ‡é’ˆ</strong>ï¼š</p><ul><li>ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆï¼ˆå¦‚<code>std::unique_ptr</code>æˆ–<code>std::shared_ptr</code>ï¼‰æ¥ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li></ul></li><li><p><strong>è€ƒè™‘çº¿ç¨‹å®‰å…¨</strong>ï¼š</p><ul><li>å¦‚æœå·¥å‚æ¨¡å¼å°†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œç¡®ä¿å·¥å‚çš„å®ç°æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ–è€…ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ã€‚</li></ul></li></ol><p>é€šè¿‡ç»“åˆä»¥ä¸Šæ–¹æ³•å’Œè®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥åœ¨C++ä¸­å®ç°ä¸€ä¸ªæ—¢çµæ´»åˆå¼ºå¤§çš„å·¥å‚æ¨¡å¼ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚</p><h2 id=5cä¸­å¦‚ä½•é¿å…æŠ½è±¡å·¥å‚æ¨¡å¼å¯¼è‡´çš„ç³»ç»Ÿå¤æ‚æ€§å¢åŠ >5.C++ä¸­ï¼Œå¦‚ä½•é¿å…æŠ½è±¡å·¥å‚æ¨¡å¼å¯¼è‡´çš„ç³»ç»Ÿå¤æ‚æ€§å¢åŠ ï¼Ÿ</h2><p>åœ¨C++ä¸­ï¼Œé¿å…æŠ½è±¡å·¥å‚æ¨¡å¼å¯¼è‡´çš„ç³»ç»Ÿå¤æ‚æ€§å¢åŠ å¯ä»¥é‡‡å–ä»¥ä¸‹ä¸€äº›ç­–ç•¥ï¼š</p><ol><li><p><strong>åˆç†ä½¿ç”¨è®¾è®¡æ¨¡å¼</strong>ï¼š</p><ul><li>åªåœ¨ç¡®å®éœ€è¦çš„æ—¶å€™ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚å¦‚æœç³»ç»Ÿä¸­çš„äº§å“æ—ä¸å¤šï¼Œæˆ–è€…äº§å“æ—ä¹‹é—´çš„å…³è”æ€§ä¸å¼ºï¼Œå¯èƒ½ä¸éœ€è¦ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</li></ul></li><li><p><strong>ç®€åŒ–äº§å“æ¥å£</strong>ï¼š</p><ul><li>ç¡®ä¿äº§å“æ¥å£å°½å¯èƒ½ç®€æ´ï¼ŒåªåŒ…å«å¿…è¦çš„æ“ä½œã€‚å‡å°‘æ¥å£çš„å¤æ‚æ€§å¯ä»¥é™ä½æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</li></ul></li><li><p><strong>é™åˆ¶äº§å“æ—çš„æ•°é‡</strong>ï¼š</p><ul><li>é¿å…å®šä¹‰è¿‡å¤šçš„äº§å“æ—ã€‚æ¯ä¸ªäº§å“æ—éƒ½éœ€è¦ç›¸åº”çš„å…·ä½“å·¥å‚ï¼Œè¿™ä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</li></ul></li><li><p><strong>ä½¿ç”¨ä¾èµ–æ³¨å…¥</strong>ï¼š</p><ul><li>é€šè¿‡ä¾èµ–æ³¨å…¥å‡å°‘å·¥å‚ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„è€¦åˆï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ï¼Œå¹¶ä¸”æ˜“äºæµ‹è¯•ã€‚</li></ul></li><li><p><strong>é¿å…è¿‡åº¦è®¾è®¡</strong>ï¼š</p><ul><li>åœ¨è®¾è®¡åˆæœŸé¿å…è¿‡åº¦è®¾è®¡ã€‚åªæœ‰åœ¨ç¡®ä¿¡æœªæ¥ä¼šæ‰©å±•æ›´å¤šäº§å“æ—æ—¶ï¼Œæ‰ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</li></ul></li><li><p><strong>åˆ©ç”¨ç»„åˆä¼˜äºç»§æ‰¿</strong>ï¼š</p><ul><li>ä½¿ç”¨å¯¹è±¡ç»„åˆä»£æ›¿ç»§æ‰¿æ¥æ‰©å±•åŠŸèƒ½ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç±»çš„æ•°é‡ï¼Œé™ä½ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</li></ul></li><li><p><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼š</p><ul><li>ç¡®ä¿æ¯ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹ä»»åŠ¡ã€‚å¦‚æœå‘ç°ç±»æ‰¿æ‹…äº†è¿‡å¤šèŒè´£ï¼Œåº”è¯¥è€ƒè™‘å°†å…¶æ‹†åˆ†æˆæ›´å°çš„ç±»ã€‚</li></ul></li><li><p><strong>ä»£ç å¤ç”¨</strong>ï¼š</p><ul><li>é€šè¿‡æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹æ¥å¤ç”¨ä»£ç ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œé™ä½ç³»ç»Ÿå¤æ‚æ€§ã€‚</li></ul></li><li><p><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼š</p><ul><li>å°†ç³»ç»Ÿåˆ†è§£ä¸ºå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå‡å°‘æ¨¡å—é—´çš„ä¾èµ–ã€‚</li></ul></li><li><p><strong>æ–‡æ¡£å’Œæ³¨é‡Š</strong>ï¼š</p><ul><li>ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å’Œæ³¨é‡Šï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£ç³»ç»Ÿçš„è®¾è®¡å’Œå„ä¸ªç»„ä»¶çš„ä½œç”¨ã€‚</li></ul></li><li><p><strong>ä»£ç å®¡æŸ¥</strong>ï¼š</p><ul><li>å®šæœŸè¿›è¡Œä»£ç å®¡æŸ¥ï¼Œä»¥è¯†åˆ«å’Œé‡æ„é‚£äº›å¯èƒ½å¯¼è‡´ç³»ç»Ÿå¤æ‚æ€§å¢åŠ çš„éƒ¨åˆ†ã€‚</li></ul></li><li><p><strong>ä½¿ç”¨ç°æœ‰çš„åº“å’Œæ¡†æ¶</strong>ï¼š</p><ul><li>å°½å¯èƒ½ä½¿ç”¨å·²ç»å­˜åœ¨çš„åº“å’Œæ¡†æ¶æ¥å®ç°å·¥å‚æ¨¡å¼ï¼Œé¿å…é‡å¤é€ è½®å­ã€‚</li></ul></li><li><p><strong>çµæ´»è¿ç”¨å…¶ä»–è®¾è®¡æ¨¡å¼</strong>ï¼š</p><ul><li>æ ¹æ®éœ€è¦ï¼Œçµæ´»è¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼æˆ–åŸå‹æ¨¡å¼ç­‰ï¼Œè¿™äº›æ¨¡å¼å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹æ¯”æŠ½è±¡å·¥å‚æ¨¡å¼æ›´ç®€å•ã€‚</li></ul></li><li><p><strong>é€æ­¥å¼•å…¥</strong>ï¼š</p><ul><li>å¦‚æœå¯èƒ½ï¼Œé€æ­¥å¼•å…¥æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚ä¸€å¼€å§‹å¯ä»¥ä½¿ç”¨æ›´ç®€å•çš„å·¥å‚æ¨¡å¼ï¼Œéšç€ç³»ç»Ÿçš„å‘å±•ï¼Œå†é€æ­¥è¿ç§»åˆ°æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</li></ul></li></ol><p>é€šè¿‡ä¸Šè¿°æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¿æŒç³»ç»Ÿçµæ´»æ€§å’Œå¯æ‰©å±•æ€§çš„åŒæ—¶ï¼Œæœ‰æ•ˆæ§åˆ¶å’Œé™ä½ç”±äºä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼å¸¦æ¥çš„ç³»ç»Ÿå¤æ‚æ€§ã€‚</p><hr><h2 id=å…³äºä½œè€…>å…³äºä½œè€…</h2><ul><li>å¾®ä¿¡å…¬ä¼—å·:WeSiGJ</li><li>GitHub:<a class=link href=https://github.com/wesigj/cplusplusboys target=_blank rel=noopener>https://github.com/wesigj/cplusplusboys</a></li><li>CSDN:<a class=link href=https://blog.csdn.net/wesigj target=_blank rel=noopener>https://blog.csdn.net/wesigj</a></li><li>å¾®åš:</li><li>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚</li></ul><img src=/./img/wechat.jpg width=60%></section><footer class=article-footer><section class=article-tags><a href=/tags/design_pattern/>Design_pattern</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/design-pattern-chain-of-responsibility-pattern/><div class=article-details><h2 class=article-title>design pattern Chain of Responsibility Pattern</h2></div></a></article><article><a href=/p/design-pattern-command-pattern/><div class=article-details><h2 class=article-title>design pattern Command Pattern</h2></div></a></article><article><a href=/p/design-pattern-composite-pattern/><div class=article-details><h2 class=article-title>design pattern Composite Pattern</h2></div></a></article><article><a href=/p/design-pattern-facade-pattern/><div class=article-details><h2 class=article-title>design pattern Facade Pattern</h2></div></a></article><article><a href=/p/design-pattern-factory-method-pattern/><div class=article-details><h2 class=article-title>design pattern Factory Method Pattern</h2></div></a></article></div></div></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Wesigj's blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.27.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>